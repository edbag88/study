Данный раздел разделен на несколько частей(каждый пункт - это ссылка на соответствующий раздел):

<br>

* [Инструкция по настройке системы на Windows](#Инструкция-по-настройке-системы-на-Windows)
  * [Установка Node.js и npm](#1-Установка-Node.js-и-npm)
  * [Установка Appium](#2-Установка-Appium)
  * [Установка драйвера UiAutomator2 для Appium](#3-Установка-драйвера-UiAutomator2-для-Appium)
  * [Установка Android Studio](#4-Установка-Android-Studio)
  * [Настройка Android Studio и установка SDK](#5-Настройка-Android-Studio-и-установка-SDK)
  * [Добавление переменной ANDROID_HOME в системные переменные](#6-Добавление-переменной-ANDROID_HOME-в-системные-переменные)
  * [Создание виртуального устройства в Android Studio](#7-Создание-виртуального-устройства-в-Android-Studio)
  * [Установка Java Development Kit (JDK)](#8-Установка-Java-Development-Kit-(JDK))
  * [Установка Appium Inspector](#8-Установка-Appium-Inspector)
  * [Запуск Appium](#9-Запуск-Appium)
  * 
* [Инструкция по настройке системы на macOS](#Инструкция-по-настройке-системы-на-macOS)



# Инструкция по настройке системы на Windows

<details><summary><b>Нажать, чтобы раскрыть</b></summary>

## 1. Установка Node.js и npm
<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Для начала необходимо проверить установлены ли Node.js и npm на вашем компьютере. Для этого необходимо открыть командную строку и выполнить следующие команды:

```bash
node -v
npm -v
```
Если Node.js и npm не установлены, то вы увидите сообщение об ошибке.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_win_0.jpeg)

### Установка Node.js

Для того чтобы установить Node.js и npm необходимо перейти на сайт [Node.js](https://nodejs.org/en/) и скачать актуальную версию. 

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/download_nodejs_win.jpeg)

После скачивания необходимо запустить установщик и следовать инструкциям.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_1.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_2.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_3.jpeg)

Обратите внимание чтобы во время установки были отображены как на скриншоте следующие опции, а именно отображение `Add to PATH` и `npm package manager`.
![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_4.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_5.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_6.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_nodejs_7.jpeg)

После установки необходимо проверить всё ли установилось корректно. Для этого необходимо открыть командную строку и выполнить команды:

```bash
node -v
npm -v
```

Если всё установилось корректно, то вы увидите версии установленных пакетов.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/npm_install.jpeg)

</details>

## 2. Установка Appium
<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Установка Appium на Windows происходит через npm. Для этого необходимо открыть командную строку и выполнить следующую команду:

```bash
npm install -g appium
```

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/finish_install_appium.jpeg)

</details>

## 3. Установка драйвера UiAutomator2 для Appium
<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Для установки драйвера UiAutomator2 необходимо выполнить следующую команду:

```bash
appium driver install uiautomator2
```

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_driver_uiautomator2.jpeg)

> **Важно!** Если во время ввода команды вы увидите ошибку, подобную этой:

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/error_appium.jpeg)

То необходимо выполнить следующую команду в терминале с **правами администратора!**:

```bash
Set-ExecutionPolicy RemoteSigned
```
И после этого ввести букву `Y` и нажать `Enter`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/fix_error.jpeg)

Далее заново нужно повторить установку драйвера UiAutomator2 по команде:

```bash
appium driver install uiautomator2
```

Если всё прошло успешно, то вы увидите сообщение об успешной установке драйвера.

</details>

## 4. Установка Android Studio
<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Для установки Android Studio необходимо перейти на [официальный сайт](https://developer.android.com/studio) разработчика и скачать актуальную версию.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/download_android_studio.jpeg)

Указать отметку, что вы прочитали и согласны с условиями лицензионного соглашения и нажать на кнопку `Download Android Studio for Windows`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/download_android_studio_terms.jpeg)

Открыть скачанный файл и следовать инструкциям.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_0.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_1.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_2.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_3.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_4.jpeg)

После установки нажимаем на кнопку `Finish`. 

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_5.jpeg)

Так как была указана отметка `Start Android Studio`, то после нажатия на кнопку откроется Android Studio.
В отобразившемся окне `Import Android Studio settings` указываем отметку `Do not import settings` и нажимаем на кнопку `OK`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_6.jpeg)

В окне `Help improve Android Studio` нажимаем на кнопку `Don't send`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_studio_7.jpeg)

</details>

## 5. Настройка Android Studio и установка SDK

<details><summary><b>Нажать, чтобы раскрыть</b></summary>

После открытия Android Studio будет отображено окно `Welcome to Android Studio`. Нажимаем на кнопку `Next`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/android_studio_setup_0.jpeg)

В окне `Install Type` выбираем `Standard` и нажимаем на кнопку `Next`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/android_studio_setup_1.jpeg)

В окне `Verify Settings` в `Current Settings` отображено что будет скачано и установлено. Нажимаем на кнопку `Next`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/android_studio_setup_2.jpeg)

В окне `License Agreement` в блоке `android-sdk-license` ставим отметку `accept`.
Кликаем на блок `intel-android-extra-license` и ставим отметку `accept` и нажимаем на кнопку `Finish`.
Название блока `intel-android-extra-license` может отличаться в зависимости от вашего пк.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/android_studio_setup_3.jpeg)

Установка зависимостей и sdk может занять некоторое время.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/downloading_components.jpeg)

> **Важно!** Если во время установки вы увидите сообщение об ошибке, подобное этому:

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/alert_virtual.jpeg)

То необходимо включить виртуализацию в BIOS. Для этого необходимо перезагрузить компьютер и во время загрузки нажать на клавишу `F2` или `F12` (в зависимости от производителя вашего пк). В меню BIOS необходимо найти пункт `Virtualization` и включить его.

### Проверка установки зависимостей и установка SDK Platforms вручную

После установки зависимостей откроется окно `Welcome to Android Studio`. В котором необходимо кликнуть на выпадающий список `More Actions` и выбрать пункт `SDK Manager`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/open_android_studio.jpeg)

На вкладке `SDK Platforms` убедитесь, что установлены все необходимые пакеты. Если какие-то пакеты не установлены, то установите их.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/sdk_platforms.jpeg)

Перейти на вкладку `SDK Tools` и убедиться, что установлены все необходимые пакеты. Если какие-то пакеты не установлены, то установите их.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/sdk_tools.jpeg)

</details>

## 6. Добавление переменной ANDROID_HOME в системные переменные

<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Для того чтобы Appium мог найти SDK Android, необходимо добавить переменную `ANDROID_HOME` в системные переменные. Для этого необходимо выполнить следующие шаги:

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/sdk_location.jpeg)

1. Перейти в `Панель управления` -> `Систем и безопасность` -> `Система` -> `Дополнительные параметры системы`.( Либо открыть окно `Мой компьютер`, кликнуть правой кнопкой мыши и выбрать пункт `Свойства`).
2. В открывшемся окне перейти на вкладку `Дополнительно`/ `Дополнительные параметры системы` и нажать на кнопку `Переменные среды`.
3. В разделе `Системные переменные`/ `Переменные среды пользователя` нажать на кнопку `Создать`.
4. В поле `Имя переменной` ввести `ANDROID_HOME`, а в поле `Значение переменной` ввести путь до папки с SDK Android. Например, `C:\Users\%USERNAME%\AppData\Local\Android\Sdk`.
5. Нажать на кнопку `ОК`.

где `%USERNAME%` - это ваше имя пользователя.

Действия выше нужно проделать как для системной переменной, так и для переменной пользователя.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/path_directory.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/open_path_location_4_1.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/open_path_location_5.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/open_path_location_6.jpeg)

Далее необходимо добавить в переменную `Path` путь до папки `platform-tools` и `tools` внутри папки с SDK Android. Для этого необходимо выполнить следующие шаги:

1. В разделе `Системные переменные`/ `Переменные среды пользователя` найти переменную `Path` и нажать на кнопку `Изменить`.
2. Нажать на кнопку `Создать`.
3. В поле `Имя переменной` ввести `Path` кликнуть на нее два раза, а в пустое поле ввести пути до папок `platform-tools` и `tools` внутри папки с SDK Android. 
Например, 
`
C:\Users\%USERNAME%\AppData\Local\Android\Sdk\tools
C:\Users\%USERNAME%\AppData\Local\Android\Sdk\tools\bin 
C:\Users\%USERNAME%\AppData\Local\Android\Sdk\platform-tools
C:\Users\%USERNAME%\AppData\Local\Android\Sdk\platform-tools\adb
C:\Users\%USERNAME%\AppData\Local\Android\Sdk\emulator
`
где `%USERNAME%` - это ваше имя пользователя.

4. Нажать на кнопку `ОК`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/android_path.jpeg)

Данные действия нужно проделать как для системной переменной, так и для переменной пользователя.


</details>

## 7. Создание виртуального устройства в Android Studio

<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Открыть `Android Studio`. 
Кликнуть на выпадающий список `More Actions` и выбрать пункт `Virtual Device Manager`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/virtual_devices.jpeg)

В открывшемся окне нажать на кнопку `Device Manager` необходимо нажать на иконку `+`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/create_device.jpeg)

На странице `System Image` необходимо выбрать версию Android, которую вы хотите установить на эмуляторе.
Если в строке `Realease Name` нарисована иконка скачивания, то необходимо нажать на нее и дождаться окончания загрузки.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/system_image.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/install_android_13.jpg)

После скачивания данная версия будет доступна для установки.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/add_image_android14.jpeg)

В окне `Choice a device definition` выбрать устройство, которое вы хотите эмулировать и нажать на кнопку `Next`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/choose_device.jpeg)

В окне `Verify Configuration` если необходимо можно изменить название устройства и другие параметры. После этого нажать на кнопку `Finish`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/add_name_avd.jpeg)

### Запуск виртуального устройства

Для того чтобы запустить виртуальное устройство, необходимо на странице `Device Manager` в строке с созданным устройством нажать на кнопку `Play`.
Первый раз может отобразиться окно `Adb`, которое необходимо одобрить.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/adb.jpeg)

После этого начнется загрузка виртуального устройства.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/device_loading.jpeg)

После загрузки виртуального устройства можно проверить его отображение в терминале с помощью команды `adb devices`.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/adb_device.jpeg)

В терминале будет отображен уникальный идентификатор устройства.

</details>

## 8. Установка Java Development Kit (JDK)
<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Для установки JDK необходимо перейти на [официальный сайт](https://www.oracle.com/java/technologies/downloads/) разработчика и скачать актуальную версию.

Или же использовать [Azul](https://www.azul.com/downloads/?package=jdk#zulu).

Или [JDK Java](https://jdk.java.net/).

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul_jdk.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul-download_jdk.jpeg)

Запустить установщик и следовать инструкциям.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul_install.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul_install_1.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul_install_2.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul_install_3.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/azul_install_4.jpeg)

Далее необходимо снова перейти в `Системные переменные`/ `Переменные среды пользователя` и проверить есть ли добавленная переменная `JAVA_HOME`. Если ее нет, то добавить ее.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/Java_home.jpeg)

Далее необходимо проверить видно ли переменную `JAVA_HOME` и `Java` в командной строке. Для этого необходимо выполнить следующие команды:

```bash
java -version
```

```bash
$Env:JAVA_HOME
```

Если переменные установлены корректно, то вы увидите версию установленного JDK и путь до папки с JDK.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/java_install_check.jpeg)


</details>

## 8. Установка Appium Inspector
<details><summary><b>Нажать, чтобы раскрыть</b></summary>


Для установки Appium Inspector необходимо перейти на [страницу GitHub](https://github.com/appium/appium-inspector/releases) проекта и скачать актуальную версию установщика именно для вашей операционной системы.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/download_appium_inspector.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/appium_inspector_download.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/choose_exe_file_appium_inspector.jpeg)

После скачивания необходимо запустить установщик и следовать инструкциям.

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/inspector_install.jpeg)

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/open_inspector.jpeg)

</details>

## 9. Запуск Appium

<details><summary><b>Нажать, чтобы раскрыть</b></summary>

Для запуска Appium необходимо открыть командную строку и выполнить следующую команду:

```bash
appium
```

![](https://raw.githubusercontent.com/qa-guru/knowledge-base/main/img/python/les20/start_appium.jpeg)

Необходимо дождаться пока Appium запустится и отобразится сообщение о том, что сервер запущен.
Необходимо проверить не отображено ли ошибок при запуске, а также отображены ли драйверы `UiAutomator2` которые были установлены ранее.


</details>
</details>

# Инструкция по настройке системы на macOS
<details><summary><b>Нажать, чтобы раскрыть</b></summary>



</details>





## Запуск теста
Готовые тесты можно запускать прямо из PyCharm. При этом в эмуляторе можно мониторит прохождения теста в реальном времени. Мобильные тесты отличаются от браузерных только системой, в которой тесты воспроизводятся.

## Как запускать тесты на физических устройствах
Android Debug Bridge (ADB) позволяет запускать тесты не на эмуляторе, а на реальном физическом устройстве. Подключать смартфон можно с помощью USB-кабеля или Wi-Fi. Ожидаемо, что быстрее и стабильнее работает соединение через USB-кабель.

Важно отметить, что перед настройкой Android Debug Bridge необходимо убедиться, что на машине уже стоит Android Studio, Appium Server и Appium Selector.

### Подготовка устройства 
1. На смартфоне необходимо перейти в настройки, открыть пункт параметров для разработчиков и активировать функцию «Отладка по USB»;
2. После этого надо подготовить компьютер, чтобы он обнаружил подключенное устройство:
    - **macOS:** дополнительные настройки на требуются;
    - **Chrome OS:** дополнительные настройки на требуются;
    - **Windows:** при необходимости следует [установить](https://developer.android.com/studio/run/oem-usb) драйвер для OEM-устройств.

### Подключение через USB
После выполнения предварительных шагов можно подключить смартфон к компьютеру через USB. При запуске тестов тесты будут запускаться на физическом устройстве, а не эмуляторе.

Чтобы убедиться, что компьютер обнаружил смартфон, следует выполнить команду `adb devices`. В списке должно появиться имя устройства.

